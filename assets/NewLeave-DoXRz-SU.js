import{u as w,k,l as D,m as y,c as l,o as r,a,b as i,w as p,v as g,F as V,g as $,t as d,p as x,j as C,i as f,h as L}from"./index-B9_x5SHy.js";import{a as M}from"./leave-Bes7aKNT.js";const U={class:"divform mt-10"},B=["value"],F={key:0,class:"errform"},T={key:0,class:"errform"},j={key:0,class:"errform"},c={key:0},I={class:"form-input bg-border"},O={key:0,class:"errform"},A={__name:"NewLeave",setup(R){const b=w(),E=k(),u=D(0),t=y({employeeName:"",Startdate:"",Endtdate:"",reason:"",status:"قيد المراجعة"}),n=y({});function v(){if(t.Startdate&&t.Endtdate){const o=new Date(t.Startdate),s=new Date(t.Endtdate)-o;u.value=Math.ceil(s/(1e3*60*60*24))+1}}function m(o){n[o]=""}function S(){let o=!0;return Object.keys(n).forEach(e=>delete n[e]),t.employeeName||(n.employeeName="يرجى اختيار اسم الموظف",o=!1),t.Startdate||(n.Startdate="يرجى تحديد تاريخ بداية الإجازة",o=!1),t.Endtdate||(n.Endtdate="يرجى تحديد تاريخ نهاية الإجازة",o=!1),t.Startdate&&t.Endtdate&&new Date(t.Endtdate)<new Date(t.Startdate)&&(n.Endtdate="تاريخ نهاية الإجازة يجب أن يكون بعد البداية",o=!1),(!t.reason||t.reason.trim().length<5)&&(n.reason="يرجى كتابة سبب الإجازة (5 أحرف على الأقل)",o=!1),o}function N(){if(!S())return;const o={id:Date.now(),employeeName:t.employeeName,date:`${t.Startdate} إلى ${t.Endtdate}`,reason:t.reason,status:t.status,Startdate:t.Startdate,Endtdate:t.Endtdate,days:u.value};M(o),b.success("تمت إضافة طلب الإجازة بنجاح!"),E.push("/employees")}return(o,e)=>(r(),l("div",U,[e[15]||(e[15]=a("h2",{class:"titleform"},"إضافة طلب إجازة جديد",-1)),a("form",{onSubmit:L(N,["prevent"]),class:"space-y-5",dir:"rtl"},[a("div",null,[e[9]||(e[9]=a("label",{class:"label"},"اسم الموظف",-1)),p(a("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.employeeName=s),class:"form-input",onChange:e[1]||(e[1]=s=>m("employeeName"))},[e[8]||(e[8]=a("option",{value:""},"-- اختر الموظف --",-1)),(r(!0),l(V,null,$(x(C),s=>(r(),l("option",{key:s.id,value:s.name},d(s.name),9,B))),128))],544),[[g,t.employeeName]]),n.employeeName?(r(),l("p",F,d(n.employeeName),1)):i("",!0)]),a("div",null,[e[10]||(e[10]=a("label",{class:"label"},"تاريخ بداية الإجازة",-1)),p(a("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>t.Startdate=s),class:"form-input",onChange:e[3]||(e[3]=s=>{m("Startdate"),v()})},null,544),[[f,t.Startdate]]),n.Startdate?(r(),l("p",T,d(n.Startdate),1)):i("",!0)]),a("div",null,[e[11]||(e[11]=a("label",{class:"label"},"تاريخ نهاية الإجازة",-1)),p(a("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>t.Endtdate=s),class:"form-input",onChange:e[5]||(e[5]=s=>{m("Endtdate"),v()})},null,544),[[f,t.Endtdate]]),n.Endtdate?(r(),l("p",j,d(n.Endtdate),1)):i("",!0)]),u.value>0?(r(),l("div",c,[e[12]||(e[12]=a("label",{class:"label"},"عدد أيام الإجازة",-1)),a("div",I,d(u.value)+" يوم",1)])):i("",!0),a("div",null,[e[13]||(e[13]=a("label",{class:"label"},"سبب الإجازة",-1)),p(a("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>t.reason=s),class:"form-input",rows:"3",onInput:e[7]||(e[7]=s=>m("reason")),placeholder:"اكتب سبب الإجازة هنا"},null,544),[[f,t.reason]]),n.reason?(r(),l("p",O,d(n.reason),1)):i("",!0)]),e[14]||(e[14]=a("button",{type:"submit",class:"btnsave"}," إرسال الطلب ",-1))],32)]))}};export{A as default};
